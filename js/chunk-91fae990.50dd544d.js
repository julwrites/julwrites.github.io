(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-91fae990"],{"0dbb":function(e,t,a){e.exports=a.p+"img/VMSuccess.f671c954.png"},"4eaf":function(e,t,a){e.exports=a.p+"img/Portainer.86b84d5f.png"},"5fdf":function(e,t,a){e.exports=a.p+"img/Cockpit.63e5c1a3.png"},"93d6":function(e,t,a){e.exports=a.p+"img/VM.1d22a89a.png"},a3de:function(e,t,a){e.exports=a.p+"img/Storage.498ce298.png"},aa57:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},n=[function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("section",[o("h1",[e._v("Setting up a Fedora Server on an old laptop")]),o("p",[e._v("Several years back, I had loaned my old laptop to one of my mentees, because he didn't have his own. This year, since he was about to start University, he had gotten himself a swanky new one, and so the old laptop returned to me. Seeing as I now had an unused piece of hardware on my hands, I decided that this would be a good opportunity for me to try experimenting further with Linux administration.")]),o("p",[e._v("Some research and a couple of discussions later, I decided to go with Fedora Server. I had considered the more common ones, but CentOS and Ubuntu were more for desktop use, and ArchLinux was a bit too bare-bones for my liking. Fedora seemed to have a good mix of server and desktop (I could have a server and run a VM for the desktop) and so I decided that would be my choice - not to mention it came with Cockpit, which had interested me greatly.")]),o("p",[e._v("I got the .iso file from "),o("a",{attrs:{href:"getfedora.org"}},[e._v("Fedora")]),e._v(" and flashed it on a USB drive using Etcher, plugged it in, and I was on my way.")]),o("p",[e._v("The installation interface was pretty much the same as CentOS (Well, they are from the same developers) and so it was quite smooth to get things started.")]),o("p",[e._v("Then the hiccups began.")]),o("p",[e._v("First wifi wouldn't work, and I spent one night figuring out why that would be the case, running "),o("code",{pre:!0},[e._v("ncmli")]),e._v(" again and again to attempt to enable it or find the AP. Eventually it came down to this; I didn't have "),o("code",{pre:!0},[e._v("wpa_supplicant")]),e._v(" installed (Which I found as an "),o("a",{attrs:{href:"https://bugzilla.redhat.com/show_bug.cgi?id=1756488"}},[e._v("issue")]),e._v(" in the Bug list of Fedora Server 31), and so it was not able to enable the wifi device.")]),o("p",[e._v("So I connected it via Ethernet cable, finished the install, installed "),o("code",{pre:!0},[e._v("wpa_supplicant")]),e._v(", enabled and started "),o("code",{pre:!0},[e._v("iwd.service")]),e._v(" and "),o("code",{pre:!0},[e._v("wpa_supplicant.service")]),e._v(", and connected to the wifi using "),o("code",{pre:!0},[e._v("nmcli device wifi connect ...")]),e._v(".")]),o("p",[e._v("A "),o("a",{attrs:{href:"https://cockpit-project.org/running.html"}},[e._v("few steps later")]),e._v(" I had Cockpit started up and connecting on wifi as well as ethernet.")]),o("p",[o("img",{attrs:{src:a("d6d2"),alt:"CockpitLogin.png"}}),o("img",{attrs:{src:a("5fdf"),alt:"Cockpit.png"}})]),o("p",[e._v("It was pretty sleek, to be honest, and I was quite impressed at how much I could do on it. It even had a terminal which allowed me to do most administration tasks.")]),o("p",[o("img",{attrs:{src:a("c7c0"),alt:"Terminal.png"}})]),o("p",[e._v("Then I attempted to create a Virtual Machine, thinking that I could try running a desktop VM on it, and expose it for use. I was getting pretty impressed at how easy it was to "),o("a",{attrs:{href:"https://fedoramagazine.org/create-virtual-machines-with-cockpit-in-fedora/"}},[e._v("create and launch a VM in Cockpit")]),e._v(" when... I didn't have space? It seemed that there was a problem with the drive management on my machine. Naturally, this meant that my virtual disk couldn't be allocated, and when I attempted to "),o("code",{pre:!0},[e._v("fdisk")]),e._v(" away the problem... I "),o("code",{pre:!0},[e._v("fdisk")]),e._v("-ed away my partition. One reboot later, I was back to square one.")]),o("p",[e._v("... One reinstall later ...")]),o("p",[e._v("I started looking around my terminal to try and figure out what exactly was missing. Cockpit did recognize my disk with the correct size, but it wasn't listing it as a drive to be used. Some "),o("code",{pre:!0},[e._v("lsblk")]),e._v(" and searching later, I found out the problem; I needed to "),o("a",{attrs:{href:"https://fedoramagazine.org/storage-management-with-cockpit/"}},[e._v("create a new logical volume")]),e._v(" which Fedora had not allocated for when automatically partitioning my drive.")]),o("p",[e._v("Now armed with this knowledge, I installed "),o("code",{pre:!0},[e._v("cockpit.storaged")]),e._v(", rebooted the server, and now I could create a new logical volume. I created this, mounted it onto "),o("code",{pre:!0},[e._v("/dev/vmvol")]),e._v(", and created a new storage pool for Virtual Machines.")]),o("p",[o("img",{attrs:{src:a("a3de"),alt:"Storage.png"}}),o("img",{attrs:{src:a("93d6"),alt:"VM.png"}})]),o("p",[e._v("Creating the VM was a little tricky due to storage. It turns out that the Virtual Machine Storage Pool was expecting "),o("code",{pre:!0},[e._v("XFS")]),e._v(" type storage, and that a Storage Volume had to be created within the Storage Pool before the VM could be created. With that up, however, it was a cinch to get a Virtual Machine workstation up and running and streaming on Cockpit. Very cool.")]),o("p",[o("img",{attrs:{src:a("0dbb"),alt:"VMSuccess.png"}})]),o("p",[e._v("This worked decently, and I was able to install Ubuntu in a VM on the server, boot it up, and access it both through Cockpit's VNC viewer as well as directly from my desktop VNC viewer.")]),o("p",[e._v("I then decided to host a "),o("a",{attrs:{href:"https://github.com/cdr/code-server"}},[e._v("code-server")]),e._v(" in a Docker container, and quickly discovered that Fedora 32 didn't yet have support for docker. Some searching around later, and I found out how to get it working "),o("a",{attrs:{href:"https://fedoramagazine.org/docker-and-fedora-32/"}},[e._v("using Moby")]),e._v(" which was basically to first remove docker, then install "),o("code",{pre:!0},[e._v("moby-engine")]),e._v(" with "),o("code",{pre:!0},[e._v("docker-compose")]),e._v(". This got Docker up and running, although - since Fedora 32 didn't support it yet - with no cockpit support, which was a bit of a bummer.")]),o("p",[e._v("Both as a stopgap measure, and also as a way of exploring, I decided to install "),o("a",{attrs:{href:"https://portainer.io"}},[e._v("Portainer")]),e._v(", which could be installed as a Docker container in my server, and manage other docker containers; seemed like a good alternative. It was quite easy to "),o("a",{attrs:{href:"https://www.linuxuprising.com/2019/05/portainer-web-based-docker-gui-for.html"}},[e._v("set up Portainer")]),e._v(", now that I had Docker up and running, and the web dashboard was quickly available.")]),o("p",[o("img",{attrs:{src:a("4eaf"),alt:"Portainer.png"}}),o("img",{attrs:{src:a("bbe2"),alt:"PortainerConsole.png"}})]),o("p",[e._v("In short, on top of my fedora server set up, I had to install the following packages:")]),o("ul",[o("li",[e._v("Wifi device: "),o("ul",[o("li",[o("code",{pre:!0},[e._v("dnf install wpa_supplicant")])]),o("li",[o("code",{pre:!0},[e._v("systemctl enable iwd.service --now")])]),o("li",[o("code",{pre:!0},[e._v("systemctl enable wpa_supplicant.service --now")])]),o("li",[o("code",{pre:!0},[e._v("nmcli device wifi connect <SSID> password <PW>")])])])]),o("li",[e._v("Storage: "),o("ul",[o("li",[o("code",{pre:!0},[e._v("dnf install cockpit.storaged")])])])]),o("li",[e._v("Virtual Machines: "),o("ul",[o("li",[o("code",{pre:!0},[e._v("dnf install libvirt cockpit-machines")])]),o("li",[o("code",{pre:!0},[e._v("systemctl enable libvirtd --now")])])])]),o("li",[e._v("Docker: "),o("ul",[o("li",[o("code",{pre:!0},[e._v("dnf remove docker-*")])]),o("li",[o("code",{pre:!0},[e._v("dnf config-manager --disable docker-*")])]),o("li",[o("code",{pre:!0},[e._v('grubby --update-kernal=ALL --args="systemd.unified_cgroup_hierarchy=0"')])]),o("li",[o("code",{pre:!0},[e._v("dnf install moby-engine docker-compose")])]),o("li",[o("code",{pre:!0},[e._v("systemctl enable docker --now")])])])])])])}],i=a("2877"),r={},d=Object(i["a"])(r,o,n,!1,null,null,null);t["default"]=d.exports},bbe2:function(e,t,a){e.exports=a.p+"img/PortainerConsole.d887c28b.png"},c7c0:function(e,t,a){e.exports=a.p+"img/Terminal.6bcd0f58.png"},d6d2:function(e,t,a){e.exports=a.p+"img/CockpitLogin.583128bd.png"}}]);
//# sourceMappingURL=chunk-91fae990.50dd544d.js.map