<!DOCTYPE html><html lang="en"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="description" content="Julian Teh's personal website"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Fira+Sans:wght@400;500;700&display=swap" rel="stylesheet"><title>Setting up a Fedora Server on an old laptop | tehj.io</title><link rel="stylesheet" href="/_astro/_slug_.e14127aa.css" />
<style>main[data-astro-cid-5uq7evlv]{max-width:800px;margin:0 auto;padding:0 1rem}article[data-astro-cid-5uq7evlv]{margin-bottom:4rem}h1[data-astro-cid-5uq7evlv]{font-size:2.5rem;margin-bottom:.5rem}.date[data-astro-cid-5uq7evlv]{margin-bottom:2rem;color:#666}.updated[data-astro-cid-5uq7evlv]{margin-top:.5rem;font-style:italic}.hero-image[data-astro-cid-5uq7evlv]{width:100%;height:auto;border-radius:8px;margin-bottom:2rem}.content[data-astro-cid-5uq7evlv]{line-height:1.6}.content[data-astro-cid-5uq7evlv] h2{margin-top:2rem;margin-bottom:1rem;font-size:1.8rem}.content[data-astro-cid-5uq7evlv] h3{margin-top:1.5rem;margin-bottom:.75rem;font-size:1.5rem}.content[data-astro-cid-5uq7evlv] p{margin-bottom:1rem}.content[data-astro-cid-5uq7evlv] img{max-width:100%;height:auto;border-radius:4px}.content[data-astro-cid-5uq7evlv] pre{padding:1rem;border-radius:4px;overflow-x:auto;margin:1rem 0}@media (prefers-color-scheme: dark){.date[data-astro-cid-5uq7evlv]{color:#aaa}}
</style></head> <body> <div class="container"> <header data-astro-cid-3ef6ksr2> <div class="header-content" data-astro-cid-3ef6ksr2> <h2 data-astro-cid-3ef6ksr2>Julian Teh</h2> <nav data-astro-cid-3ef6ksr2> <a href="/" class="" data-astro-cid-3ef6ksr2>Home</a> <a href="/projects" class="active" data-astro-cid-3ef6ksr2>Projects</a> <a href="/blog" class="" data-astro-cid-3ef6ksr2>Blog</a> <a href="https://github.com/julwrites" target="_blank" data-astro-cid-3ef6ksr2>GitHub</a> </nav> </div> </header>  <main>  <main data-astro-cid-5uq7evlv> <article data-astro-cid-5uq7evlv> <h1 data-astro-cid-5uq7evlv>Setting up a Fedora Server on an old laptop</h1> <div class="date" data-astro-cid-5uq7evlv> <time datetime="2020-08-07T00:00:00.000Z" data-astro-cid-5uq7evlv> August 7, 2020 </time>  </div> <img src="/blog/assets/blog/2020_08_07_Fedora_Server/Cockpit.png" alt="Hero image for Setting up a Fedora Server on an old laptop" class="hero-image" data-astro-cid-5uq7evlv> <div class="content" data-astro-cid-5uq7evlv> <p>Several years back, I had loaned my old laptop to one of my mentees, because he didn’t have his own. This year, since he was about to start University, he had gotten himself a swanky new one, and so the old laptop returned to me. Seeing as I now had an unused piece of hardware on my hands, I decided that this would be a good opportunity for me to try experimenting further with Linux administration.</p>
<p>Some research and a couple of discussions later, I decided to go with Fedora Server. I had considered the more common ones, but CentOS and Ubuntu were more for desktop use, and ArchLinux was a bit too bare-bones for my liking. Fedora seemed to have a good mix of server and desktop (I could have a server and run a VM for the desktop) and so I decided that would be my choice - not to mention it came with Cockpit, which had interested me greatly.</p>
<p>I got the .iso file from <a href="getfedora.org">Fedora</a> and flashed it on a USB drive using Etcher, plugged it in, and I was on my way.</p>
<p>The installation interface was pretty much the same as CentOS (Well, they are from the same developers) and so it was quite smooth to get things started.</p>
<p>Then the hiccups began.</p>
<p>First wifi wouldn’t work, and I spent one night figuring out why that would be the case, running <code>ncmli</code> again and again to attempt to enable it or find the AP. Eventually it came down to this; I didn’t have <code>wpa_supplicant</code> installed (Which I found as an <a href="https://bugzilla.redhat.com/show_bug.cgi?id=1756488">issue</a> in the Bug list of Fedora Server 31), and so it was not able to enable the wifi device.</p>
<p>So I connected it via Ethernet cable, finished the install, installed <code>wpa_supplicant</code>, enabled and started <code>iwd.service</code> and <code>wpa_supplicant.service</code>, and connected to the wifi using <code>nmcli device wifi connect ...</code>.</p>
<p>A <a href="https://cockpit-project.org/running.html">few steps later</a> I had Cockpit started up and connecting on wifi as well as ethernet.</p>
<p><img src="/blog/assets/blog/2020_08_07_Fedora_Server/CockpitLogin.png" alt="CockpitLogin.png">
<img src="/blog/assets/blog/2020_08_07_Fedora_Server/Cockpit.png" alt="Cockpit.png"></p>
<p>It was pretty sleek, to be honest, and I was quite impressed at how much I could do on it. It even had a terminal which allowed me to do most administration tasks.</p>
<p><img src="/blog/assets/blog/2020_08_07_Fedora_Server/Terminal.png" alt="Terminal.png"></p>
<p>Then I attempted to create a Virtual Machine, thinking that I could try running a desktop VM on it, and expose it for use. I was getting pretty impressed at how easy it was to <a href="https://fedoramagazine.org/create-virtual-machines-with-cockpit-in-fedora/">create and launch a VM in Cockpit</a> when… I didn’t have space? It seemed that there was a problem with the drive management on my machine. Naturally, this meant that my virtual disk couldn’t be allocated, and when I attempted to <code>fdisk</code> away the problem… I <code>fdisk</code>-ed away my partition. One reboot later, I was back to square one.</p>
<p>… One reinstall later …</p>
<p>I started looking around my terminal to try and figure out what exactly was missing. Cockpit did recognize my disk with the correct size, but it wasn’t listing it as a drive to be used. Some <code>lsblk</code> and searching later, I found out the problem; I needed to <a href="https://fedoramagazine.org/storage-management-with-cockpit/">create a new logical volume</a> which Fedora had not allocated for when automatically partitioning my drive.</p>
<p>Now armed with this knowledge, I installed <code>cockpit.storaged</code>, rebooted the server, and now I could create a new logical volume. I created this, mounted it onto <code>/dev/vmvol</code>, and created a new storage pool for Virtual Machines.</p>
<p><img src="/blog/assets/blog/2020_08_07_Fedora_Server/Storage.png" alt="Storage.png">
<img src="/blog/assets/blog/2020_08_07_Fedora_Server/VM.png" alt="VM.png"></p>
<p>Creating the VM was a little tricky due to storage. It turns out that the Virtual Machine Storage Pool was expecting <code>XFS</code> type storage, and that a Storage Volume had to be created within the Storage Pool before the VM could be created. With that up, however, it was a cinch to get a Virtual Machine workstation up and running and streaming on Cockpit. Very cool.</p>
<p><img src="/blog/assets/blog/2020_08_07_Fedora_Server/VMSuccess.png" alt="VMSuccess.png"></p>
<p>This worked decently, and I was able to install Ubuntu in a VM on the server, boot it up, and access it both through Cockpit’s VNC viewer as well as directly from my desktop VNC viewer.</p>
<p>I then decided to host a <a href="https://github.com/cdr/code-server">code-server</a> in a Docker container, and quickly discovered that Fedora 32 didn’t yet have support for docker. Some searching around later, and I found out how to get it working <a href="https://fedoramagazine.org/docker-and-fedora-32/">using Moby</a> which was basically to first remove docker, then install <code>moby-engine</code> with <code>docker-compose</code>. This got Docker up and running, although - since Fedora 32 didn’t support it yet - with no cockpit support, which was a bit of a bummer.</p>
<p>Both as a stopgap measure, and also as a way of exploring, I decided to install <a href="https://portainer.io">Portainer</a>, which could be installed as a Docker container in my server, and manage other docker containers; seemed like a good alternative. It was quite easy to <a href="https://www.linuxuprising.com/2019/05/portainer-web-based-docker-gui-for.html">set up Portainer</a>, now that I had Docker up and running, and the web dashboard was quickly available.</p>
<p><img src="/blog/assets/blog/2020_08_07_Fedora_Server/Portainer.png" alt="Portainer.png">
<img src="/blog/assets/blog/2020_08_07_Fedora_Server/PortainerConsole.png" alt="PortainerConsole.png"></p>
<p>In short, on top of my fedora server set up, I had to install the following packages:</p>
<ul>
<li>Wifi device:
<ul>
<li><code>dnf install wpa_supplicant</code></li>
<li><code>systemctl enable iwd.service --now</code></li>
<li><code>systemctl enable wpa_supplicant.service --now</code></li>
<li><code>nmcli device wifi connect &#x3C;SSID> password &#x3C;PW></code></li>
</ul>
</li>
<li>Storage:
<ul>
<li><code>dnf install cockpit.storaged</code></li>
</ul>
</li>
<li>Virtual Machines:
<ul>
<li><code>dnf install libvirt cockpit-machines</code></li>
<li><code>systemctl enable libvirtd --now</code></li>
</ul>
</li>
<li>Docker:
<ul>
<li><code>dnf remove docker-*</code></li>
<li><code>dnf config-manager --disable docker-*</code></li>
<li><code>grubby --update-kernal=ALL --args="systemd.unified_cgroup_hierarchy=0"</code></li>
<li><code>dnf install moby-engine docker-compose</code></li>
<li><code>systemctl enable docker --now</code></li>
</ul>
</li>
</ul> </div> </article> </main>  </main> <footer data-astro-cid-sz7xmlte> <div class="links-container" data-astro-cid-sz7xmlte> <div class="links-section" data-astro-cid-sz7xmlte> <p data-astro-cid-sz7xmlte>Connect With Me</p> <div class="icons" data-astro-cid-sz7xmlte> <a href="https://github.com/julwrites/julwrites.github.io/raw/master/assets/resume/Resume_Julian_Teh.pdf" target="_blank" title="Resume" data-astro-cid-sz7xmlte> <img src="/assets/images/dark/resume.png" alt="Resume" data-astro-cid-sz7xmlte> <span data-astro-cid-sz7xmlte>Resume</span> </a> <a href="https://linkedin.com/in/julwrites" target="_blank" title="LinkedIn" data-astro-cid-sz7xmlte> <img src="/assets/images/dark/linkedin.png" alt="LinkedIn" data-astro-cid-sz7xmlte> <span data-astro-cid-sz7xmlte>LinkedIn</span> </a> <a href="mailto:contact@tehj.io" target="_blank" title="Email" data-astro-cid-sz7xmlte> <img src="/assets/images/dark/email.png" alt="Email" data-astro-cid-sz7xmlte> <span data-astro-cid-sz7xmlte>Email</span> </a> </div> </div> </div> <p data-astro-cid-sz7xmlte>&copy; 2025 Julian Teh. All rights reserved.</p> </footer>  </div> </body></html> 