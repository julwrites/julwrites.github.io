<!DOCTYPE html><html lang="en"> <head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="description" content="Julian Teh's personal website"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Fira+Sans:wght@400;500;700&display=swap" rel="stylesheet"><title>Trying to make a USB Camera from Raspberry Pi 3B+ | tehj.io</title><link rel="stylesheet" href="/_astro/_slug_.e14127aa.css" />
<style>main[data-astro-cid-5uq7evlv]{max-width:800px;margin:0 auto;padding:0 1rem}article[data-astro-cid-5uq7evlv]{margin-bottom:4rem}h1[data-astro-cid-5uq7evlv]{font-size:2.5rem;margin-bottom:.5rem}.date[data-astro-cid-5uq7evlv]{margin-bottom:2rem;color:#666}.updated[data-astro-cid-5uq7evlv]{margin-top:.5rem;font-style:italic}.hero-image[data-astro-cid-5uq7evlv]{width:100%;height:auto;border-radius:8px;margin-bottom:2rem}.content[data-astro-cid-5uq7evlv]{line-height:1.6}.content[data-astro-cid-5uq7evlv] h2{margin-top:2rem;margin-bottom:1rem;font-size:1.8rem}.content[data-astro-cid-5uq7evlv] h3{margin-top:1.5rem;margin-bottom:.75rem;font-size:1.5rem}.content[data-astro-cid-5uq7evlv] p{margin-bottom:1rem}.content[data-astro-cid-5uq7evlv] img{max-width:100%;height:auto;border-radius:4px}.content[data-astro-cid-5uq7evlv] pre{padding:1rem;border-radius:4px;overflow-x:auto;margin:1rem 0}@media (prefers-color-scheme: dark){.date[data-astro-cid-5uq7evlv]{color:#aaa}}
</style></head> <body> <div class="container"> <header data-astro-cid-3ef6ksr2> <div class="header-content" data-astro-cid-3ef6ksr2> <h2 data-astro-cid-3ef6ksr2>Julian Teh</h2> <nav data-astro-cid-3ef6ksr2> <a href="/" class="" data-astro-cid-3ef6ksr2>Home</a> <a href="/projects" class="active" data-astro-cid-3ef6ksr2>Projects</a> <a href="/blog" class="" data-astro-cid-3ef6ksr2>Blog</a> <a href="https://github.com/julwrites" target="_blank" data-astro-cid-3ef6ksr2>GitHub</a> </nav> </div> </header>  <main>  <main data-astro-cid-5uq7evlv> <article data-astro-cid-5uq7evlv> <h1 data-astro-cid-5uq7evlv>Trying to make a USB Camera from Raspberry Pi 3B+</h1> <div class="date" data-astro-cid-5uq7evlv> <time datetime="2023-07-01T00:00:00.000Z" data-astro-cid-5uq7evlv> July 1, 2023 </time>  </div> <img src="/blog/assets/blog/2023_07_01_Raspberry_Pi_USB_Camera/libcamera_test.png" alt="Hero image for Trying to make a USB Camera from Raspberry Pi 3B+" class="hero-image" data-astro-cid-5uq7evlv> <div class="content" data-astro-cid-5uq7evlv> <p>So this all started after I bought a Mac Mini for personal use. I wanted a small but stable device that would plug into my existing displays and provide peak performance. And since I already had a Surface Go, this was my best option.</p>
<p>For the most part, I love it. It’s fast, it’s quiet, it’s easy on the electrical bill… But then I had to take a video call.</p>
<p>I did some research on options for a web camera, but something about having to buy a device that I think I will use maybe 10 times a year kind of irked me. Not to mention that my growing collection of unused electronics irks my wife. So with a bada-Bing bada-Bard, I figured I could use one of my spare Raspberry Pi’s, and a lonely Raspberry Pi Camera module, to be my new USB camera.</p>
<h2 id="raspberry-pi-3b-and-pi-camera">Raspberry Pi 3B+ and Pi Camera</h2>
<p>I followed this <a href="https://www.raspberrypi.com/tutorials/plug-and-play-raspberry-pi-usb-webcam/">article</a> from Raspberry Pi’s official website, which was the only one claiming it could run on Raspberry Pi 3B+ (which was the only Pi I had free which was able to plug in my 5MP Pi Camera rev1.3 FFC). There were others - including this one - which claimed to work well with the Pi Zero W, but I didn’t have the FFC for that, and I wanted to see if I could get it working without having to buy anything more.</p>
<p>After a lot of trial and error, I finally came down to booting up the Pi and then trying to start up the script manually so that I could observe the output. This showed me ‘no cameras available’, and after a little digging with this error message, I unearthed this <a href="https://github.com/raspberrypi/libcamera-apps/issues/125">libcamera Github issue</a>.</p>
<p>Another couple of tries later, I found the settings that I needed for <code>/boot/config.txt</code> (conveniently I also found that I could access this from the SD Card directly, which saved me some hassle after I bootlocked myself once).</p>
<pre class="astro-code github-dark" style="background-color:#24292e;color:#e1e4e8; overflow-x: auto;" tabindex="0"><code><span class="line"><span>[all]</span></span>
<span class="line"><span>dtoverlay=vc4-fkms-v3d</span></span>
<span class="line"><span>dtoverlay=dwc2</span></span>
<span class="line"><span>dr_mode=otg</span></span></code></pre>
<p>The same Github issue mentioned <code>dtoverlay=vc4-kms-v3d</code>, which in my case was already set.</p>
<p><img src="/blog/assets/blog/2023_07_01_Raspberry_Pi_USB_Camera/libcamera_test.png" alt="Successful Test Image!"></p>
<p>Now this led to the next problem; although running the script now seemed successful, it wasn’t connecting on any of the USB ports. So it was time to look at <code>uvc-gadget</code>. And this is where I got stuck, no matter how many times I changed the boot config, or enabled the settings, the camera wouldn’t connect to my Mac Mini.</p>
<h2 id="raspberry-pi-b-and-otg">Raspberry Pi B and OTG</h2>
<p>After some research, I finally found an <a href="https://raspberrypi.stackexchange.com/questions/54871/is-there-a-way-to-make-a-rp3-b-act-as-a-usb-gadget-periferal">article</a> stating that OTG is not available on the Raspberry Pi 3B+, because it didn’t have a fast enough USB hub connection to the CPU to act as a slave device.</p>
<p>And given that I didn’t have another type of Raspberry Pi (I only have B’s), this camera module seemed doomed to be a video monitor of sorts, rather than a USB Camera like I had hoped.</p>
<p>Looks I’ll be getting a Pi Zero camera module after all.</p>
<h2 id="other-options">Other options</h2>
<p>I won’t document the next step, since it seems like it might not be much interesting detail, but here are some options I have for the Raspberry Pi.</p>
<ul>
<li><a href="https://github.com/piwebcam/PiWebcam">PiWebcam</a></li>
<li><a href="https://github.com/jacksonliam/mjpg-streamer">MJPG Streamer</a></li>
</ul> </div> </article> </main>  </main> <footer data-astro-cid-sz7xmlte> <div class="links-container" data-astro-cid-sz7xmlte> <div class="links-section" data-astro-cid-sz7xmlte> <p data-astro-cid-sz7xmlte>Connect With Me</p> <div class="icons" data-astro-cid-sz7xmlte> <a href="https://github.com/julwrites/julwrites.github.io/raw/master/assets/resume/Resume_Julian_Teh.pdf" target="_blank" title="Resume" data-astro-cid-sz7xmlte> <img src="/assets/images/dark/resume.png" alt="Resume" data-astro-cid-sz7xmlte> <span data-astro-cid-sz7xmlte>Resume</span> </a> <a href="https://linkedin.com/in/julwrites" target="_blank" title="LinkedIn" data-astro-cid-sz7xmlte> <img src="/assets/images/dark/linkedin.png" alt="LinkedIn" data-astro-cid-sz7xmlte> <span data-astro-cid-sz7xmlte>LinkedIn</span> </a> <a href="mailto:contact@tehj.io" target="_blank" title="Email" data-astro-cid-sz7xmlte> <img src="/assets/images/dark/email.png" alt="Email" data-astro-cid-sz7xmlte> <span data-astro-cid-sz7xmlte>Email</span> </a> </div> </div> </div> <p data-astro-cid-sz7xmlte>&copy; 2025 Julian Teh. All rights reserved.</p> </footer>  </div> </body></html> 